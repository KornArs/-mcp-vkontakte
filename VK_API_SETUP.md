# Настройка VK API для MCP сервера

## Шаг 1: Создание приложения ВКонтакте

1. Перейдите на [VK Developer](https://vk.com/dev)
2. Войдите в свой аккаунт ВКонтакте
3. Нажмите "Создать приложение"
4. Заполните форму:
   - **Название**: `MCP VKontakte Server`
   - **Платформа**: `Веб-сайт`
   - **Адрес сайта**: `http://localhost` (для разработки)
5. Нажмите "Подтвердить"

## Шаг 2: Получение Access Token

### Для работы с личным профилем:
1. В настройках приложения перейдите в "Настройки"
2. Включите "Open API"
3. Скопируйте **ID приложения**
4. Перейдите по ссылке:
   ```
   https://oauth.vk.com/authorize?client_id=YOUR_APP_ID&display=page&redirect_uri=http://localhost&scope=wall,offline&response_type=token&v=5.131
   ```
5. Замените `YOUR_APP_ID` на ваш ID приложения
6. Разрешите доступ
7. Скопируйте токен из адресной строки

### Для работы с группами:
1. В настройках приложения включите "Open API"
2. Добавьте права на управление группами
3. Получите токен через OAuth с правами `groups,wall,offline`

## Шаг 3: Настройка переменных окружения

1. Скопируйте `env.example` в `.env`
2. Заполните переменные:
   ```bash
   VK_ACCESS_TOKEN=ваш_токен_здесь
   VK_API_VERSION=5.131
   VK_GROUP_ID=id_вашей_группы
   ```

## Шаг 4: Получение ID группы

1. Откройте страницу группы ВКонтакте
2. В адресной строке найдите ID:
   - `vk.com/club12345` → ID = `12345`
   - `vk.com/public12345` → ID = `12345`
3. Добавьте ID в `.env` файл

## Шаг 5: Тестирование API

После настройки протестируйте работу:

```bash
# Установка зависимостей
npm install

# Сборка проекта
npm run build

# Запуск в режиме разработки
npm run dev
```

## Возможные проблемы

### Ошибка "Access denied"
- Проверьте права приложения
- Убедитесь, что токен не истек
- Проверьте версию API

### Ошибка "Invalid group ID"
- Убедитесь, что группа существует
- Проверьте, что у вас есть права на управление группой
- ID группы должен быть положительным числом

### Ошибка "Rate limit exceeded"
- VK API имеет ограничения на количество запросов
- Добавьте задержки между запросами
- Используйте кэширование данных

## Безопасность

⚠️ **ВАЖНО**: Никогда не публикуйте токены в открытом доступе!
- Храните `.env` файл локально
- Добавьте `.env` в `.gitignore`
- Регулярно обновляйте токены
- Используйте минимально необходимые права доступа
